<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realistic 3D Flip Book</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #ddd;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        #book-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            perspective: 2500px; /* üîπ Adds strong 3D effect */
        }
        #book {
            width: 800px;
            height: 600px;
            background: white;
            box-shadow: 5px 10px 30px rgba(0, 0, 0, 0.5);
            transform-style: preserve-3d; /* üîπ Enables true 3D flipping */
            transition: transform 0.8s ease-in-out;
            border-radius: 5px;
            position: relative;
        }
        .page {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            backface-visibility: hidden; /* üîπ Prevents showing back of flipped pages */
            transform-origin: left center;
            background: white;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
        }
        .page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 5px;
        }
        #book .hardcover {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, #5d4037, #3e2723);
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        #book .spine {
            position: absolute;
            width: 20px;
            height: 100%;
            background: linear-gradient(90deg, #3e2723, #5d4037);
            left: -10px;
            top: 0;
            z-index: 5;
            border-radius: 3px;
        }
        #controls {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <h1>üìñ 3D Flip Book</h1>
    <p>Click or use arrow keys to turn pages.</p>

    <div id="controls" style="display: none;">
        <button id="prev">‚¨ÖÔ∏è Previous</button>
        <span id="page-num">Page 1</span>
        <button id="next">Next ‚û°Ô∏è</button>
    </div>

    <div id="book-container">
        <div id="book">
            <div class="hardcover"></div>
            <div class="spine"></div>
        </div>
    </div>

    <!-- Load jQuery & Turn.js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>

    <script>
        $(document).ready(function () {
            console.log("JavaScript Loaded!");
            
            // CONFIGURATION
            const config = {
                prefix: 'page',   // Filename prefix (e.g., "page1.jpg")
                suffix: '.jpg',   // Image extension
                startPage: 1,     // First page number
                maxPages: 10,     // Adjust based on your total number of pages
                zeroPad: false,   // Set to true if filenames are "page01.jpg" instead of "page1.jpg"
                folder: ''  // üîπ Root directory (do not change this!)
            };

            const $book = $('#book');
            const $pageNum = $('#page-num');
            let foundPages = [];

            function checkPage(pageNum) {
                if (pageNum > config.maxPages) {
                    if (foundPages.length > 0) {
                        initBook();
                    } else {
                        console.error("‚ùå No pages found!");
                        $('#book-container').html("<h2 style='color: red;'>Error: No pages found!</h2>");
                    }
                    return;
                }

                const numStr = config.zeroPad ? pageNum.toString().padStart(2, '0') : pageNum.toString();
                const filename = config.folder + config.prefix + numStr + config.suffix;
                console.log(`Checking file: ${filename}`);

                const img = new Image();
                img.onload = function () {
                    console.log(`‚úÖ Found: ${filename}`);
                    foundPages.push(`
                        <div class="page">
                            <img src="${filename}" alt="Page ${pageNum}">
                        </div>
                    `);
                    checkPage(pageNum + 1);
                };
                img.onerror = function () {
                    console.warn(`‚ö†Ô∏è Missing: ${filename}`);
                    checkPage(pageNum + 1);
                };
                img.src = filename;
            }

            function initBook() {
                console.log(`‚úÖ Success! Found ${foundPages.length} pages.`);
                $('#controls').show();
                $book.append(foundPages.join(''));

                // Initialize turn.js with 3D settings
                $book.turn({
                    width: 800,
                    height: 600,
                    display: 'double',
                    acceleration: true,
                    gradients: true,  // üîπ Enables smooth gradient page turning
                    elevation: 50,     // üîπ Makes page edges lift realistically
                    autoCenter: true,  // üîπ Centers the book on the screen
                    duration: 1000,    // üîπ Slower page turn for realism
                    when: {
                        turning: function (e, page) {
                            $pageNum.text(`Page ${page}`);
                            let angle = page % 2 === 0 ? 20 : -20;
                            $book.css("transform", `rotateY(${angle}deg)`);
                        },
                        turned: function (e, page) {
                            $book.css("transform", "rotateY(0deg)");
                        }
                    }
                });

                // Navigation Buttons
                $('#prev').click(() => $book.turn('previous'));
                $('#next').click(() => $book.turn('next'));

                // Arrow Key Navigation
                $(document).keydown(e => {
                    if (e.key === 'ArrowLeft') $book.turn('previous');
                    if (e.key === 'ArrowRight') $book.turn('next');
                });

                // Click to flip pages
                $book.on("click", function (event) {
                    let center = $(this).width() / 2;
                    if (event.pageX < center) {
                        $book.turn('previous');
                    } else {
                        $book.turn('next');
                    }
                });
            }

            // Start Checking Pages
            checkPage(config.startPage);
        });
    </script>

</body>
</html>
